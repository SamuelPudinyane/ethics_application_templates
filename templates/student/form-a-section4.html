<!-- FORM A: SECTION 1-5 -->
<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <title>Form A ‚Äì Human Research Ethics | JBS Ethics</title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
  <link rel="stylesheet" href="/static/css/form_a.css">
  <!-- <link rel="stylesheet" href="{{ url_for('static', filename='css/form_a.css') }}"> -->
</head>

<body>

  <!-- Navbar -->
  <header class="navbar">
    <div class="nav-content">
      <!-- <img src="{{ url_for('static',filename='img/image.png')}}" alt="UJ JBS Logo" class="logo uj"> -->
      <img src="/static/img/image.png" alt="UJ JBS Logo" class="logo uj">
      <span class="nav-title">Form A ‚Äì Section 5: Methodology</span>

      <!-- Logout -->
      <div style="text-align: right;">

        <a href="/templates/login/logout.html" class="btn-logout">Logout</a>
      </div>
    </div>
  </header>

  <!-- Main Content -->
  <main class="main-content">

    <!-- Top Bar -->
    <div class="form-header">
      <button class="approve-btn">üíæ Save Draft</button>
      <strong>Step 5 of 7</strong>
    </div>

    <!-- Progress Bar -->
    <div class="progress-bar">
      <div class="progress-fill" style="width: 70%">70%</div>
    </div>


    <!-- Section 5: Methodology -->
    <section id="section-5">
      <h2>SECTION 5 ‚Äì METHODOLOGY</h2>



      <label>5.1 Research Paradigm (Substantiate your choice of paradigm)</label><br>
      <table id="methodTypeTable" class="table table-bordered">
        <thead>
          <tr>
            <th>Quantitative Methods ‚ÑπÔ∏è</th>
            <th>Qualitative Methods ‚ÑπÔ∏è</th>
            <th>Mixed Methods ‚ÑπÔ∏è</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td class="text-center"><input type="checkbox" name="quantitative[]" value="yes"></td>
            <td class="text-center"><input type="checkbox" name="qualitative[]" value="yes"></td>
            <td class="text-center"><input type="checkbox" name="mixed_methods[]" value="yes"></td>
          </tr>
        </tbody>
      </table>
      <textarea name="paradigm_explanation" rows="3" placeholder="Explain your paradigm selection"></textarea>

      <label>5.2 Research Design / Approach</label>
      <textarea name="design" rows="4"
        placeholder="Name & describe the research design you intend to use, e.g. descriptive correlation, case study, grounded theory, etc. If your research will proceed in different phases, describe each phase sequentially"></textarea>



      <label>5.3 Participant Group Description</label>
      <label>5.3.1 Describe the population from which you will sample participants, the sampling method, sample size and
        inclusion criteria.</label>
      <table id="participantsTable" class="table table-bordered">
        <thead>
          <tr>
            <th>Population</th>
            <th>Sampling Method</th>
            <th>Sample Size</th>
            <th>Inclusion Criteria</th>
            <th>Action</th>
          </tr>
        </thead>
        <tbody>
          <tr>
            <td><input type="text" name="population[]" class="form-control" /></td>
            <td><input type="text" name="sampling_method[]" class="form-control" /></td>
            <td><input type="number" name="sample_size[]" class="form-control" /></td>
            <td><textarea name="inclusion_criteria[]" rows="2" class="form-control"></textarea></td>
            <td><button type="button" class="btn btn-danger btn-sm" onclick="removeRow(this)">Remove</button></td>
          </tr>
        </tbody>
      </table>

      <button type="button" class="btn btn-secondary" onclick="addRow()">Add Row</button>


      <label>5.3.2 Describe how much time you require of participants in each group and when the data will be collected/
        interviews will take place.</label>
      <textarea name="duration_timing" rows="2" placeholder="Time and Date description"></textarea>

      <label>5.3.3 Explain how you will obtain the contact details of participants<label>
          <textarea name="contact_details_method" rows="2" placeholder="Describe"></textarea>

          <!-- 5.3.4 Conflict of Interest -->
          <label>5.3.4 Conflict of interest or unequal relationship between researcher and participants?</label><br>
          <input type="radio" name="conflict_interest" value="No"> No
          <input type="radio" name="conflict_interest" value="Yes"> Yes
          <div id="conflict_explanation_box" style="display: none;">
            <textarea name="conflict_explanation" rows="2"
              placeholder="If yes, give details and explain how it will be mitigated"></textarea>
          </div>

          <br><br>

          <!-- 5.4 Data Collection -->
          <h5>5.4 Research Instruments for Data Collection</h5>

          <label>5.4.1 Indicate which data collection methods will be used:</label><br>
          <div id="data-methods">
            <label><input type="checkbox" value="questionnaire" class="method-check"> Questionnaire</label><br>
            <label><input type="checkbox" value="interview" class="method-check"> Interview</label><br>
            <label><input type="checkbox" value="focus" class="method-check"> Focus Group</label><br>
            <label><input type="checkbox" value="observation" class="method-check"> Observation</label><br>
            <label><input type="checkbox" value="documents" class="method-check"> Documents</label><br>
            <label><input type="checkbox" value="other" class="method-check"> Other</label><br>
          </div>

          <!-- Questionnaire -->
          <div id="questionnaire_fields" style="display:none; margin-top: 1rem;">
            <label>5.4.1.1 Questionnaire(s):</label><br>
            <input type="radio" name="questionnaire_type" value="Self-designed"> Self-designed<br>
            <input type="radio" name="questionnaire_type" value="Existing"> Existing<br>
            <label>If existing, permission obtained?</label><br>
            <input type="checkbox" name="permission_obtained"> Yes
            <input type="checkbox" name="open_source"> Open Source<br>
            <textarea name="instrument_attachment_reason" rows="2" placeholder="Attach or justify"></textarea>
          </div>

          <!-- Interview -->
          <div id="interview_fields" style="display:none; margin-top: 1rem;">
            <label>5.4.2.1 Interviews</label><br>
            <input type="checkbox" name="interview_type" value="In-depth"> In-depth
            <input type="checkbox" name="interview_type" value="Semi-structured"> Semi-structured
            <input type="checkbox" name="interview_type" value="Unstructured"> Unstructured<br>
            <label>Will interviews be recorded?</label><br>
            <input type="checkbox" name="interview_recording" value="Audio"> Audio
            <input type="checkbox" name="interview_recording" value="Video"> Video
          </div>

          <!-- Focus Group -->
          <div id="focus_fields" style="display:none; margin-top: 1rem;">
            <label>5.4.2.2 Focus Groups</label><br>
            <input type="radio" name="use_focus_groups" value="Yes"> Yes
            <input type="radio" name="use_focus_groups" value="No"> No<br>
            <label>Will focus groups be recorded?</label><br>
            <input type="checkbox" name="focus_recording" value="Audio"> Audio
            <input type="checkbox" name="focus_recording" value="Video"> Video
          </div>

          <!-- Observation -->
          <div id="observation_fields" style="display:none; margin-top: 1rem;">
            <label>Please describe your observation protocol:</label>
            <textarea name="observation_details" rows="3"
              placeholder="Explain how observations will be conducted."></textarea>
          </div>

          <!-- Documents -->
          <div id="documents_fields" style="display:none; margin-top: 1rem;">
            <label>What type of documents will be analyzed?</label>
            <textarea name="documents_details" rows="3"
              placeholder="E.g. reports, archives, publications..."></textarea>
          </div>

          <!-- Other -->
          <div id="other_fields" style="display:none; margin-top: 1rem;">
            <label>Please describe other data collection method(s):</label>
            <textarea name="other_details" rows="3" placeholder="Describe..."></textarea>
          </div>

          <!-- General Data Collection Procedure -->
          <label style="margin-top: 1.5rem;">5.4.2 Describe the data collection procedure</label>
          <textarea name="data_collection_procedure" rows="3"
            placeholder="Describe the data collection procedure in detail"></textarea>

          <br><br>


          <label>5.4.3 Who will collect the data (Researcher and/or field workers/external company)?</label>
          <textarea name="data_collectors" rows="2"
            placeholder="Explain any measures that you will take to prepare yourself or field workers to optimise data collection activities (Provide a confidentiality agreement form for fieldworkers/ external party"></textarea>

          <!-- 5.4.4 Intervention -->
          <label>5.4.4 Will participants be subjected to any form of intervention (manipulation of the participant or
            the
            participants' environment)?</label><br>
          <input type="radio" name="intervention" value="No"> No
          <input type="radio" name="intervention" value="Yes"> Yes<br>
          <div id="intervention_details_box" style="display:none;">
            <textarea name="intervention_details" rows="2" placeholder="If yes, explain the intervention"></textarea>
          </div>

          <!-- 5.4.5 Sensitive Data -->
          <label>5.4.5 Sensitive data or vulnerable populations?</label>
          <textarea name="sensitive_data" rows="2"
            placeholder="If applicable, describe the nature of the data or population."></textarea>

          <!-- 5.4.6 Translator -->
          <label>5.4.6 Will a translator be required?</label><br>
          <input type="radio" name="translator" value="No"> No
          <input type="radio" name="translator" value="Yes"> Yes<br>
          <div id="translator_details_box" style="display:none;">
            <textarea name="translator_procedure" rows="2" placeholder="Explain how translator will be used"></textarea>
          </div>

          <br>


          <h5>5.5 Secondary Data Usage</h5>

          <label>Will secondary data be used?</label><br>
          <select id="secondaryData" class="form-select" onchange="handleSecondaryData()">
            <option value="">-- Select --</option>
            <option value="yes">Yes</option>
            <option value="no">No</option>
          </select>

          <div id="secondaryDetails" style="display: none; margin-top: 1rem;">

            <label>Is the data Public or Private?</label><br>
            <select id="dataType" class="form-select" onchange="handleDataType()">
              <option value="">-- Select --</option>
              <option value="private">Private</option>
              <option value="public">Public</option>
              <option value="both">Both</option>
            </select>

            <!-- Private Data Section -->
            <div id="privateDataSection" style="display: none; margin-top: 1rem;">
              <label>Is the data from a company that has provided permission?</label><br>
              <select id="privatePermission" class="form-select" onchange="handlePrivatePermission()">
                <option value="">-- Select --</option>
                <option value="yes">Yes</option>
                <option value="no">No</option>
              </select>

              <div id="uploadPrivatePermission" style="display: none; margin-top: 1rem;">
                <label>Please upload the permission for use of private data:</label>
                <input type="file" name="private_permission_file" class="form-control">
              </div>
            </div>

            <!-- Public Data Section -->
            <div id="publicDataSection" style="display: none; margin-top: 1rem;">
              <label>What type of public data is going to be used?</label>
              <textarea name="public_data_description" rows="3" class="form-control"
                placeholder="e.g., Annual reports; Open data; investigative reports"></textarea>
            </div>
          </div>
    </section>

    <!-- Navigation Buttons -->
    <div class="form-navigation">
      <a href="form-a-section3.html" class="revise-btn">‚¨Ö Section 3</a>
      <a href="form-a-section5.html" class="approve-btn">Next ‚ûî Section 4</a>
    </div>
    </form>

  </main>

  <!-- Footer -->
  <footer class="footer">
    <p>&copy; 2025 Johannesburg Business School | University of Johannesburg</p>
  </footer>

  <script>
    function addRow() {
      const table = document.getElementById('participantsTable').getElementsByTagName('tbody')[0];
      const newRow = table.rows[0].cloneNode(true);
      // Clear input values
      Array.from(newRow.querySelectorAll('input, textarea')).forEach(input => input.value = '');
      table.appendChild(newRow);
    }

    function removeRow(button) {
      const row = button.closest('tr');
      const table = document.getElementById('participantsTable').getElementsByTagName('tbody')[0];
      if (table.rows.length > 1) {
        row.remove();
      } else {
        alert("You must have at least one row.");
      }
    }

    function handleSecondaryData() {
      const val = document.getElementById("secondaryData").value;
      document.getElementById("secondaryDetails").style.display = val === "yes" ? "block" : "none";
    }

    function handleDataType() {
      const type = document.getElementById("dataType").value;
      const privateSection = document.getElementById("privateDataSection");
      const publicSection = document.getElementById("publicDataSection");

      privateSection.style.display = (type === "private" || type === "both") ? "block" : "none";
      publicSection.style.display = (type === "public" || type === "both") ? "block" : "none";
    }

    function handlePrivatePermission() {
      const val = document.getElementById("privatePermission").value;
      document.getElementById("uploadPrivatePermission").style.display = val === "yes" ? "block" : "none";
    }

    function resetFields() {
      document.getElementById('dataType').value = "";
      document.getElementById('privatePermission').value = "";
      document.getElementById('privateDataSection').style.display = 'none';
      document.getElementById('publicDataSection').style.display = 'none';
      document.getElementById('uploadPrivatePermission').style.display = 'none';
    }

    // Conflict of interest explanation toggle
    document.querySelectorAll('input[name="conflict_interest"]').forEach(radio => {
      radio.addEventListener('change', function () {
        document.getElementById('conflict_explanation_box').style.display = this.value === 'Yes' ? 'block' : 'none';
      });
    });

    // Method logic
    const methodMap = {
      'questionnaire': 'questionnaire_fields',
      'interview': 'interview_fields',
      'focus': 'focus_fields',
      'observation': 'observation_fields',
      'documents': 'documents_fields',
      'other': 'other_fields',
    };

    document.querySelectorAll('.method-check').forEach(checkbox => {
      checkbox.addEventListener('change', function () {
        const targetId = methodMap[this.value];
        if (targetId) {
          const target = document.getElementById(targetId);
          target.style.display = this.checked ? 'block' : 'none';
        }
      });
    });
  </script>


</body>

</html>